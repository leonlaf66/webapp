<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta http-equiv="Access-Control-Allow-Origin" content="*">
		<meta http-equiv="content-security-policy">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<link href="css/mui.min.css" rel="stylesheet" />
		<link href="css/jquery.autocompleter.css" />
		<style type="text/css">
			.yourclass {
				width: auto;
			}
			
			.mycheck {
				background: url(images/gou.png) no-repeat;
			}
		</style>
	</head>

	<body style="background: white;">
		<div style="margin-top: 12px;">
			<table width="100%">
				<tr>
					<td width="50%">
						<div align="left"><img src="images/alogo.png" style="width: 80px;margin-left: 12px;"></div>
					</td>
					<td width="50%">
						<a href="index.html">
							<div align="right"><img src="images/home.png" style="width: 30px;margin-right: 12px;"></div>
						</a>
					</td>
				</tr>
			</table>
		</div>
		<div style="background: white;">
			<div id="typeHeader" style="height: 40px;margin-left: 10px;margin-right: 10px;padding-top: 10px;">
				
				
				<table width="100%">
					<tr>
						<td width="90%">
							<div align="left"><input type="text" width="100%" height="100%" placeholder="Search Address,City,or Zip" style="font-size: 12px;z-index: 9999999;" id="inputtext"/></div>
						</td>
						
						<td width="10%">
							<div align="right"><img src="images/searcha.png" style="width: 25px;height: 25px;" id="seatchBtn"></div>
						</td>
					</tr>
				</table>
				
				
			</div>
			
			<div id="typeHeader" style="height: 35px;margin-top: 20px;background: white;">
				<table width="100%">
					<tr>
						<td width="20%">
							<div class="filters" align="center" style="border-right:1px solid #dedede;border-left:1px white;font-size: 14px;color: #333333;margin-top: 10px;" typec="type" id="typea">类型</div>
						</td>
						<td width="20%">
							<div align="center" class="filters" style="border-right:1px solid #dedede;border-left:1px white;font-size: 14px;color: #333333;margin-top: 10px;" typec="price" id="pricea">价格</div>
						</td>
						<td width="20%">
							<div align="center" class="filters" style="border-right:1px solid #dedede;border-left:1px white;font-size: 14px;color: #333333;margin-top: 10px;" typec="square" id="squarea">面积</div>
						</td>
						<td width="20%">
							<div align="center" class="filters" style="border-right:1px solid #dedede;border-left:1px white;font-size: 14px;color: #333333;margin-top: 10px;" typec="beds" id="bedsa">卧室</div>
						</td>
						<td width="20%">
							<div align="center" class="filters" style="font-size: 14px;color: #333333;margin-top: 10px;" typec="more" id="morea">更多</div>
						</td>
					</tr>
				</table>
			</div>

		</div>

		<div id="allContail" style="margin-top: 10px;z-index: 10;">

		</div>
		<script src="js/mui.min.js"></script>
		<script src="js/jquery.js"></script>
		<script src="layer/layer.js"></script>
		<script src="js/jquery.autocompleter.js"></script>
		<script type="text/javascript">
			function GetQueryString(name) {
				var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
				var r = window.location.search.substr(1).match(reg);
				if(r != null) return unescape(r[2]);
				return null;
			}
			window.lang = GetQueryString('language');
			window.key = GetQueryString('key');
			window.value = GetQueryString('value');
			window.q = GetQueryString('q');
			//alert(window.q);
			if(window.key && window.value){
				$('#inputtext').val(window.value);
			}
			
				if(window.q){
				$('#inputtext').val(decodeURI(window.q));
			}

			if(window.lang == 'zh-CN') {
				$('#typea').get(0).innerHTML = '类型';
				$('#pricea').get(0).innerHTML = '价格';
				$('#squarea').get(0).innerHTML = '面积';
				$('#bedsa').get(0).innerHTML = '卧室';
				$('#morea').get(0).innerHTML = '更多';
			} else {
				$('#typea').get(0).innerHTML = 'Type';
				$('#pricea').get(0).innerHTML = 'Price';
				$('#squarea').get(0).innerHTML = 'Area';
				$('#bedsa').get(0).innerHTML = 'Beds';
				$('#morea').get(0).innerHTML = 'More';
			}
			
			$('#seatchBtn').click(function(){
				getHouseData();
			});

			window.types = ['SF', 'MF', 'CC'];
			$('div.filters').click(function() {
				layer.closeAll();
				var type = $(this).attr('typec');
				var widht = $(window).width();
				if(type == 'type') {
					var ds;
					if(window.lang == 'zh-CN') {
						ds = [{
								"title": "独栋别墅",
								"value": "SF"
							},
							{
								"title": "多家庭",
								"value": "MF"
							},
							{
								"title": "公寓",
								"value": "CC"
							},
							{
								"title": "商业用房",
								"value": "CI"
							},
							{
								"title": "营业用房",
								"value": "BU"
							},
							{
								"title": "土地",
								"value": "LD"
							}
						];
					} else {
						ds = [{
								"title": "Single Family",
								"value": "SF"
							},
							{
								"title": "Multi Family",
								"value": "MF"
							},
							{
								"title": "Condominium",
								"value": "CC"
							},
							{
								"title": "Commercial",
								"value": "CI"
							},
							{
								"title": "Business Oportunty",
								"value": "BU"
							},
							{
								"title": "Land",
								"value": "LD"
							}
						];

					}
					var html = '';
					for(var i = 0; i < ds.length; i++) {
						var o = ds[i];
						html += '<table width="100%" cid="' + o.value + '" class="items"><tr><td width="85%">'
						html += '<div style="height:35px;padding-left:12px;color:#333333;font-size:13px;padding-top:7px;" id="' + o.value + '_d" valuec="' + o.value + '">' + o.title + '</div>';
						html += '</td><td width="15%">'

						html += '<div align="right" style="padding-right:12px;"><div style="width:20px;height:20px;border-radius:3px;border:1px solid #f2f2f2;"  value="' + o.value + '" id="' + o.value + '_c" ></div></div>'

						html += '</td></tr></table>'
						html += '<div style="height:1px;margin-left:12px;color:#333333;background:#f2f2f2;"></div>';
					}
					if(window.lang == 'zh-CN') {
						html += '<div id="okbtn" style="height:35px;margin-left:12px;color:white;background:#AFD25E;margin-right:12px;border-radius:3px;padding-top:6px;margin-top:15px;" align="center">确定</div>';
					} else {
						html += '<div id="okbtn" style="height:35px;margin-left:12px;color:white;background:#AFD25E;margin-right:12px;border-radius:3px;padding-top:6px;margin-top:15px;" align="center">OK</div>';
					}

					layer.open({
						type: 1,
						title: false,
						closeBtn: 0,
						area: [widht + 'px', '300px'],
						offset: ['150px', '0px'],
						shadeClose: true,
						skin: 'yourclass',
						content: html
					});

					for(var j = 0; j < window.types.length; j++) {
						var v = window.types[j];
						$('#' + v + '_c').addClass('mycheck');
					}

					$('table.items').click(function() {
						var chek = $('#' + $(this).attr('cid') + '_c');

						if(chek.hasClass('mycheck')) {
							chek.removeClass('mycheck');
						} else {
							chek.addClass('mycheck');
						}
					});

					$('#okbtn').click(function() {
						var cs = $('div.mycheck');
						window.types = [];
						for(var i = 0; i < cs.length; i++) {
							var odiv = cs[i];
							window.types.push($(odiv).attr('value'));
						}
						layer.closeAll();
						getHouseData();

					});
				} else if(type == 'price') {
					if(window.lang == 'zh-CN') {
						ds = [{
								"title": "0-50万美元",
								"tag": "1",
								"value": {
									"from": "0",
									"to": "500000"
								}
							},
							{
								"title": "50万-80万美元",
								"tag": "2",
								"value": {
									"from": "500000",
									"to": "800000"
								}
							},
							{
								"title": "80万-120万美元",
								"tag": "3",
								"value": {
									"from": "800000",
									"to": "1200000"
								}
							},
							{
								"title": "120万美元+",
								"tag": "4",
								"value": {
									"from": "1200000"
								}
							}
						];
					} else {

						ds = [{
								"title": "$0-$500000",
								"tag": "1",
								"value": {
									"from": "0",
									"to": "500000"
								}
							},
							{
								"title": "$500000-$800000",
								"tag": "2",
								"value": {
									"from": "500000",
									"to": "800000"
								}
							},
							{
								"title": "$800000-$1200000",
								"tag": "3",
								"value": {
									"from": "800000",
									"to": "1200000"
								}
							},
							{
								"title": "$1200000+",
								"tag": "4",
								"value": {
									"from": "1200000"
								}
							}
						];

					}
					var html = '';
					for(var i = 0; i < ds.length; i++) {
						var o = ds[i];
						html += '<div class="pricediv" style="height:35px;padding-left:12px;color:#333333;font-size:13px;padding-top:7px;"  valuec="' + o.tag + '">' + o.title + '</div>';
						html += '<div style="height:1px;margin-left:12px;color:#333333;background:#f2f2f2;"></div>';
					}
					if(window.lang == 'zh-CN') {
						html += '<div id="pokbtn" style="height:35px;margin-left:12px;color:white;background:#AFD25E;margin-right:12px;border-radius:3px;padding-top:6px;margin-top:15px;" align="center">确定</div>';
					} else {
						html += '<div id="pokbtn" style="height:35px;margin-left:12px;color:white;background:#AFD25E;margin-right:12px;border-radius:3px;padding-top:6px;margin-top:15px;" align="center">OK</div>';
					}

					layer.open({
						type: 1,
						title: false,
						closeBtn: 0,
						area: [widht + 'px', '250px'],
						offset: ['150px', '0px'],
						shadeClose: true,
						skin: 'yourclass',
						content: html
					});

					if(window.price) {
						$('div[valuec=' + window.price + ']').css('color', '#AFD25E');
					}

					$('div.pricediv').click(function() {

						var ps = $('div.pricediv');
						for(var m = 0; m < ps.length; m++) {
							$(ps[m]).css('color', '#333333');
						}
						$(this).css('color', '#AFD25E');
						window.price = $(this).attr('valuec');
					});

					$('#pokbtn').click(function() {

						layer.closeAll();
						getHouseData();

					});
				} else if(type == 'square') {

					if(window.lang == 'zh-CN') {
						ds = [{
								"title": "0-100平方米",
								"value": {
									"from": "0",
									"to": "1000"
								},
								"tag": "1"
							},
							{
								"title": "100-200平方米",
								"value": {
									"from": "1000",
									"to": "2000"
								},
								"tag": "2"
							},
							{
								"title": "200-300平方米",
								"value": {
									"from": "2000",
									"to": "3000"
								},
								"tag": "3"
							},
							{
								"title": "300平方米以上",
								"value": {
									"from": "3000"
								},
								"tag": "4"
							}
						];
					} else {

						ds = [{
								"title": "1000-2000",
								"value": {
									"from": "1000",
									"to": "2000"
								},
								"tag": "2"
							},
							{
								"title": "2000-3000",
								"value": {
									"from": "2000",
									"to": "3000"
								},
								"tag": "3"
							},
							{
								"title": "3000+",
								"value": {
									"from": "3000"
								},
								"tag": "4"
							}
						];

					}

					var html = '';
					for(var i = 0; i < ds.length; i++) {
						var o = ds[i];
						html += '<div class="squarediv" style="height:35px;padding-left:12px;color:#333333;font-size:13px;padding-top:7px;"  values="' + o.tag + '">' + o.title + '</div>';
						html += '<div style="height:1px;margin-left:12px;color:#333333;background:#f2f2f2;"></div>';
					}
					if(window.lang == 'zh-CN') {
						html += '<div id="spokbtn" style="height:35px;margin-left:12px;color:white;background:#AFD25E;margin-right:12px;border-radius:3px;padding-top:6px;margin-top:15px;" align="center">确定</div>';
					} else {
						html += '<div id="spokbtn" style="height:35px;margin-left:12px;color:white;background:#AFD25E;margin-right:12px;border-radius:3px;padding-top:6px;margin-top:15px;" align="center">OK</div>';
					}

					layer.open({
						type: 1,
						title: false,
						closeBtn: 0,
						area: [widht + 'px', '250px'],
						offset: ['150px', '0px'],
						shadeClose: true,
						skin: 'yourclass',
						content: html
					});

					if(window.square) {
						$('div[values=' + window.square + ']').css('color', '#AFD25E');
					}

					$('div.squarediv').click(function() {

						var ps = $('div.squarediv');
						for(var m = 0; m < ps.length; m++) {
							$(ps[m]).css('color', '#333333');
						}
						$(this).css('color', '#AFD25E');
						window.square = $(this).attr('values');
					});

					$('#spokbtn').click(function() {

						layer.closeAll();
						getHouseData();

					});

				} else if(type == 'price') {
					if(window.lang == 'zh-CN') {
						ds = [{
								"title": "0-50万美元",
								"tag": "1",
								"value": {
									"from": "0",
									"to": "500000"
								}
							},
							{
								"title": "50万-80万美元",
								"tag": "2",
								"value": {
									"from": "500000",
									"to": "800000"
								}
							},
							{
								"title": "80万-120万美元",
								"tag": "3",
								"value": {
									"from": "800000",
									"to": "1200000"
								}
							},
							{
								"title": "120万美元+",
								"tag": "4",
								"value": {
									"from": "1200000"
								}
							}
						];
					} else {

						ds = [{
								"title": "$0-$500000",
								"tag": "1",
								"value": {
									"from": "0",
									"to": "500000"
								}
							},
							{
								"title": "$500000-$800000",
								"tag": "2",
								"value": {
									"from": "500000",
									"to": "800000"
								}
							},
							{
								"title": "$800000-$1200000",
								"tag": "3",
								"value": {
									"from": "800000",
									"to": "1200000"
								}
							},
							{
								"title": "$1200000+",
								"tag": "4",
								"value": {
									"from": "1200000"
								}
							}
						];

					}
					var html = '';
					for(var i = 0; i < ds.length; i++) {
						var o = ds[i];
						html += '<div class="pricediv" style="height:35px;padding-left:12px;color:#333333;font-size:13px;padding-top:7px;"  valuec="' + o.tag + '">' + o.title + '</div>';
						html += '<div style="height:1px;margin-left:12px;color:#333333;background:#f2f2f2;"></div>';
					}
					if(window.lang == 'zh-CN') {
						html += '<div id="pokbtn" style="height:35px;margin-left:12px;color:white;background:#AFD25E;margin-right:12px;border-radius:3px;padding-top:6px;margin-top:15px;" align="center">确定</div>';
					} else {
						html += '<div id="pokbtn" style="height:35px;margin-left:12px;color:white;background:#AFD25E;margin-right:12px;border-radius:3px;padding-top:6px;margin-top:15px;" align="center">OK</div>';
					}

					layer.open({
						type: 1,
						title: false,
						closeBtn: 0,
						area: [widht + 'px', '250px'],
						offset: ['150px', '0px'],
						shadeClose: true,
						skin: 'yourclass',
						content: html
					});

					if(window.price) {
						$('div[valuec=' + window.price + ']').css('color', '#AFD25E');
					}

					$('div.pricediv').click(function() {

						var ps = $('div.pricediv');
						for(var m = 0; m < ps.length; m++) {
							$(ps[m]).css('color', '#333333');
						}
						$(this).css('color', '#AFD25E');
						window.price = $(this).attr('valuec');
					});

					$('#pokbtn').click(function() {

						layer.closeAll();
						getHouseData();

					});
				} else if(type == 'beds') {

					if(window.lang == 'zh-CN') {
						ds = [{
								"title": "一居室以上",
								"value": "1"
							},
							{
								"title": "二居室以上",
								"value": "2"
							},
							{
								"title": "三居室以上",
								"value": "3"
							},
							{
								"title": "四居室以上",
								"value": "4"
							},
							{
								"title": "五居室以上",
								"value": "5"
							},
							{
								"title": "六居室以上",
								"value": "6"
							}
						];
					} else {

						ds = [{
								"title": "1+",
								"value": "1"
							},
							{
								"title": "2+",
								"value": "2"
							},
							{
								"title": "3+",
								"value": "3"
							},
							{
								"title": "4+",
								"value": "4"
							},
							{
								"title": "5+",
								"value": "5"
							},
							{
								"title": "6+",
								"value": "6"
							}
						];

					}

					var html = '';
					for(var i = 0; i < ds.length; i++) {
						var o = ds[i];
						html += '<div class="bedsdiv" style="height:35px;padding-left:12px;color:#333333;font-size:13px;padding-top:7px;"  valueb="' + o.value + '">' + o.title + '</div>';
						html += '<div style="height:1px;margin-left:12px;color:#333333;background:#f2f2f2;"></div>';
					}
					if(window.lang == 'zh-CN') {
						html += '<div id="bspokbtn" style="height:35px;margin-left:12px;color:white;background:#AFD25E;margin-right:12px;border-radius:3px;padding-top:6px;margin-top:15px;" align="center">确定</div>';
					} else {
						html += '<div id="bspokbtn" style="height:35px;margin-left:12px;color:white;background:#AFD25E;margin-right:12px;border-radius:3px;padding-top:6px;margin-top:15px;" align="center">OK</div>';
					}

					layer.open({
						type: 1,
						title: false,
						closeBtn: 0,
						area: [widht + 'px', '300px'],
						offset: ['150px', '0px'],
						shadeClose: true,
						skin: 'yourclass',
						content: html
					});

					if(window.beds) {
						$('div[valueb=' + window.beds + ']').css('color', '#AFD25E');
					}

					$('div.bedsdiv').click(function() {

						var ps = $('div.bedsdiv');
						for(var m = 0; m < ps.length; m++) {
							$(ps[m]).css('color', '#333333');
						}
						$(this).css('color', '#AFD25E');
						window.beds = $(this).attr('valueb');
					});

					$('#bspokbtn').click(function() {

						layer.closeAll();
						getHouseData();

					});

				} else if(type == 'more') {

					var html = '';
					var baths = 'Baths';
					var Parking = 'Parking';
					var market = 'Days on Market';

					var newMarket = 'News';
					var sdays = 'Less than 7 days';
					var tdays = 'Less than 30 days';

					if(window.lang == 'zh-CN') {
						baths = '卫生间';
						Parking = '车位';
						market = '上市天数';

						newMarket = '新上市';
						sdays = '小于7天';
						tdays = '小于30天';
					}

					html += '<div  style="height:35px;padding-left:12px;color:#333333;font-size:13px;padding-top:7px;">' + baths + '</div>';
					html += '<table width="100%">'
					html += '<tr>'
					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:12px;margin-right:6px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="baths" bathsvalue="1">1</div></div>';
					html += '</td>'

					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:6px;margin-right:6px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="baths" bathsvalue="2">2</div></div>';
					html += '</td>'

					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:6px;margin-right:12px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="baths" bathsvalue="3">3</div></div>';
					html += '</td>'

					html += '</tr>'

					html += '<tr>'
					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:12px;margin-right:6px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="baths" bathsvalue="4">4</div></div>';
					html += '</td>'

					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:6px;margin-right:6px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="baths" bathsvalue="5">5+</div></div>';
					html += '</td>'

					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"></div>';
					html += '</td>'

					html += '</tr>'

					html += '</table>'

					////parking

					html += '<div  style="height:35px;padding-left:12px;color:#333333;font-size:13px;padding-top:7px;">' + Parking + '</div>';
					html += '<table width="100%">'
					html += '<tr>'
					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:12px;margin-right:6px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="parking" parkingvalue="1">1+</div></div>';
					html += '</td>'

					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:6px;margin-right:6px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="parking" parkingvalue="2">2+</div></div>';
					html += '</td>'

					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:6px;margin-right:12px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="parking" parkingvalue="3">3+</div></div>';
					html += '</td>'

					html += '</tr>'

					html += '<tr>'
					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:12px;margin-right:6px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="parking" parkingvalue="4">4+</div></div>';
					html += '</td>'

					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:6px;margin-right:6px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="parking" parkingvalue="5">5+</div></div>';
					html += '</td>'

					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"></div>';
					html += '</td>'

					html += '</tr>'

					html += '</table>'

					////days on marking 

					////parking

					html += '<div  style="height:35px;padding-left:12px;color:#333333;font-size:13px;padding-top:7px;">' + market + '</div>';
					html += '<table width="100%">'
					html += '<tr>'
					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:12px;margin-right:6px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="market" marketvalue="1">' + newMarket + '</div></div>';
					html += '</td>'

					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:6px;margin-right:6px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="market" marketvalue="2">' + sdays + '</div></div>';
					html += '</td>'

					html += '<td width="33.3%">'
					html += '<div align="center" style="margin-top:10px;"><div align="center" style="margin-left:6px;margin-right:12px;height:30px;background:#f2f2f2;padding-top:5px;font-size:12px;color:#333333;" class="market" marketvalue="3">' + tdays + '</div></div>';
					html += '</td>'

					html += '</tr>'

					html += '</table>'

					////
					var sbtn = 'Search';
					var setbtn = 'Reset';
					if(window.lang == 'zh-CN') {
						sbtn = '查询';
						setbtn = '重置';

					}

					html += '<table width="100%">'
					html += '<tr>'
					html += '<td width="50%">'
					html += '<div id="resetBtn" align="center" style="margin-top:20px;background:white;height:35px;font-size:15px;color:#333333;padding-top:5px;">' + setbtn + '</div>';
					html += '</td>'

					html += '<td width="50%">'
					html += '<div id="mysearch" align="center" style="margin-top:20px;background:#AFD25E;height:35px;color:white;font-size:15px;padding-top:5px;">' + sbtn + '</div>';
					html += '</td>'

					html += '</tr>'

					html += '</table>'

					layer.open({
						type: 1,
						title: false,
						closeBtn: 0,
						area: [widht + 'px', '360px'],
						offset: ['150px', '0px'],
						shadeClose: true,
						skin: 'yourclass',
						content: html
					});

					if(window.baths) {
						$('div[bathsvalue=' + window.baths + ']').css('color', 'white');
						$('div[bathsvalue=' + window.baths + ']').css('background', '#AFD25E');
					}

					if(window.parking) {
						$('div[parkingvalue=' + window.parking + ']').css('color', 'white');
						$('div[parkingvalue=' + window.parking + ']').css('background', '#AFD25E');
					}

					if(window.market) {
						$('div[marketvalue=' + window.market + ']').css('color', 'white');
						$('div[marketvalue=' + window.market + ']').css('background', '#AFD25E');
					}

					$('div.baths').click(function() {

						var ps = $('div.baths');
						for(var m = 0; m < ps.length; m++) {
							$(ps[m]).css('color', '#333333');
							$(ps[m]).css('background', '#f2f2f2');
						}
						$(this).css('color', 'white');
						$(this).css('background', '#AFD25E');
						window.baths = $(this).attr('bathsvalue');
					});

					$('div.parking').click(function() {

						var ps = $('div.parking');
						for(var m = 0; m < ps.length; m++) {
							$(ps[m]).css('color', '#333333');
							$(ps[m]).css('background', '#f2f2f2');
						}
						$(this).css('color', 'white');
						$(this).css('background', '#AFD25E');
						window.parking = $(this).attr('parkingvalue');
					});

					$('div.market').click(function() {

						var ps = $('div.market');
						for(var m = 0; m < ps.length; m++) {
							$(ps[m]).css('color', '#333333');
							$(ps[m]).css('background', '#f2f2f2');
						}
						$(this).css('color', 'white');
						$(this).css('background', '#AFD25E');
						window.market = $(this).attr('marketvalue');
					});

					$('#resetBtn').click(function() {
						window.market = '';
						window.parking = '';
						window.baths = '';
						window.beds = '';
						window.listPirce = '';
						window.square = '';
						window.types = [];
						var ps = $('div.baths');
						for(var m = 0; m < ps.length; m++) {
							$(ps[m]).css('color', '#333333');
							$(ps[m]).css('background', '#f2f2f2');
						}

						var pss = $('div.market');
						for(var m = 0; m < pss.length; m++) {
							$(pss[m]).css('color', '#333333');
							$(pss[m]).css('background', '#f2f2f2');
						}
						//layer.closeAll();
						//getHouseData();

						var sps = $('div.parking');
						for(var m = 0; m < sps.length; m++) {
							$(sps[m]).css('color', '#333333');
							$(sps[m]).css('background', '#f2f2f2');
						}

					});
					$('#mysearch').click(function() {

						layer.closeAll();
						getHouseData();

					});

				}

				////结束

				var divs = $('div.layui-layer-shade');
				var shadow = divs[0];
				$(shadow).css('margin-top', '150px');
			});

			function getHouseData() {
				$('#allContail').children().remove();
				//var filters = '{"prop-type":"[\"MF\", \"SF\", \"CC\"]"}';
				layer.load();

				// alert(filters);

				if(window.price == 1) {
					window.listPirce = {
						"from": "0",
						"to": "500000"
					};
				} else if(window.price == 2) {
					window.listPirce = {
						"from": "500000",
						"to": "800000"
					}
				} else if(window.price == 3) {
					window.listPirce = {
						"from": "800000",
						"to": "1200000"
					}
				} else if(window.price == 4) {
					window.listPirce = {
						"from": "1200000"
					}
				}

				if(window.square == 2) {
					window.squareV = {
						"from": "1000",
						"to": "2000"
					}
				} else if(window.square == 3) {
					window.squareV = {
						"from": "2000",
						"to": "3000"
					}
				} else if(window.square == 4) {
					window.squareV = {
						"from": "3000"
					}
				}
				$.ajax({
					url: 'http://api.usleju.cn/estate/house/search',
					type: 'GET', //GET
					async: true, //或false,是否异步
					data: {
						type: 'purchase',
						'filters[prop-type]': window.types,
						'list_price': window.listPirce,
						'page_size': 150,
						'square': window.squareV,
						'beds': window.beds,
						'page': 1,
						'city_code':window.key,
						'q':$('#inputtext').val(),
						'baths': window.baths,
						'parking': window.parking,
						'market-days': window.market
					},
					timeout: 5000, //超时时间
					dataType: 'json', //返回的数据格式：json/xml/html/script/jsonp/text
					beforeSend: function(request) {
						request.setRequestHeader("app-token", "b2e476cb5ddcbf81c337218d5b5d43fa83bd6a8d4c9b7ba4ea047c70d22a828c");
						request.setRequestHeader("language", window.lang || 'en-US');

					},
					success: function(data, textStatus, jqXHR) {
						layer.closeAll('loading');
						var obj = data;
						if(obj.code == 200) {
							var objs = obj.data.items;

							$('#allContail').append('<div style="background: #dedede;height: 1px;"></div>');
							for(var i = 0; i < objs.length; i++) {
								var o = objs[i];
								var html = '<a href="home.html?anguage=' + window.lang + '&id=' + o.id + '"><table>';
								html += '<tr>';
								html += '<td width="35%">';
								html += '<img src="' + o.image + '" style="height:90px;width:140px;margin-top:10px;margin-left:5px; "/>';
								html += '</td>';
								html += '<td width="65%">';

								html += '<div style="color:#333333;font-size:12px;margin-top:5px;margin-left:5px;">' + o.name + '</div>';

								html += '<div style="color:#333333;font-size:10px;margin-top:5px;margin-left:5px;">' + o.location + '</div>';

								if(lang == 'zh-CN') {
									var desc = '卧室 ' + o.no_bedrooms + '| 全卫 ' + o.no_full_baths + ' 半卫 ' + o.no_half_baths + ' | 居住面积 ' + o.square_feet + '';
									html += '<div style="color:#333333;font-size:10px;margin-top:5px;margin-left:5px;">' + desc + '</div>';

								} else {
									var desc = o.no_bedrooms + 'beds ' + o.no_full_baths + '.' + o.no_half_baths + 'baths ' + o.square_feet;
									html += '<div style="color:#333333;font-size:10px;margin-top:5px;margin-left:5px;">' + desc + '</div>';

								}

								if(lang == 'zh-CN') {
									html += '<div style="color:#333333;font-size:10px;margin-top:5px;margin-left:5px;">售价:<font color="red">' + o.list_price + '</font></div>';

								} else {
									html += '<div style="color:#333333;font-size:10px;margin-top:5px;margin-left:5px;">Price:<font color="red">' + o.list_price + '</font></div>';

								}

								html += '</td>';
								html += '</tr>';
								html += '</table></a>';
								$('#allContail').append(html);
								$('#allContail').append('<div style="background: #dedede;height: 1px;"></div>');
							}

						}
					},
					error: function(xhr, textStatus) {
						layer.closeAll('loading');
					},
					complete: function() {
						layer.closeAll('loading');
					}
				})

			}

			getHouseData();
			
			
			
			
				
			function loadKeys(){
						$.ajax({
				url: 'http://api.usleju.cn/estate/house/search-options',
				type: 'GET', //GET
				async: true, //或false,是否异步
				data: {},
				timeout: 5000, //超时时间
				dataType: 'json', //返回的数据格式：json/xml/html/script/jsonp/text
				beforeSend: function(request) {
					request.setRequestHeader("app-token", "b2e476cb5ddcbf81c337218d5b5d43fa83bd6a8d4c9b7ba4ea047c70d22a828c");
					request.setRequestHeader("language", lang);

				},
				success: function(data, textStatus, jqXHR) {
					var obj = data;

					if(obj.code == 200) {
						var datas = obj.data;
					window.keys = [];
					
					for(var i = 0;i< datas.length;i++){
						var o = {'value':datas[i]['title'],'label':datas[i]['desc']};
						window.keys.push(o);
					}
					
					 $('#inputtext').autocompleter({ source: window.keys });
					 
					 
					}
				},
				error: function(xhr, textStatus) {
					console.log('错误')
					console.log(xhr)
					console.log(textStatus)
				},
				complete: function() {
					console.log('结束')
				}
			})
				
			}
			
		//	loadKeys();
		</script>
	</body>

</html>